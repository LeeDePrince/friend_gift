<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Merry Christmas üéÑ</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: gabriola, sans-serif;
  color: white;
  text-align: center;
  background: black;
  position: relative;
}

/* Background Layers */
.bg {
  position: fixed;
  inset: 0;
  background-size: cover;
  background-position: center;
  opacity: 0;
  transition: opacity 1.5s ease;
  z-index: 1;
}
#bgGift { background-image: url("gift.jpg"); }
#bgChoco { background-image: url("chocolate.jpg"); }
.bg.active { opacity: 1; }

/* Overlay for readability */
#overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.35);
  z-index: 2;
}

/* Main content */
#content {
  position: relative;
  z-index: 5;
  margin-top: 30vh;
}
p {
  font-size: 1.5em;
  text-shadow: 2px 2px 6px black;
  white-space: pre-line;
  margin: 20px;
}
button {
  margin-top: 25px;
  padding: 15px 25px;
  font-size: 1.1em;
  background: crimson;
  color: white;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: all 1.2s ease;
}
button:disabled { opacity: 0.6; cursor: not-allowed; }
button.pulse { animation: pulse 3s infinite; }
@keyframes pulse {
  0% { box-shadow: 0 0 5px gold; transform: scale(1); }
  50% { box-shadow: 0 0 20px gold; transform: scale(1.05); }
  100% { box-shadow: 0 0 5px gold; transform: scale(1); }
}

/* Particles */
.particle {
  position: fixed;
  z-index: 6;
  pointer-events: none;
}
.snow { font-size: 12px; animation: fall linear infinite; color: white; }
@keyframes fall { to { transform: translateY(110vh); } }
.rain { width: 2px; height: 15px; background: lightblue; animation: fall linear infinite; }
.heart { font-size: 18px; color: pink; animation: fallHeart linear infinite; }
@keyframes fallHeart { to { transform: translateY(110vh); } }
.balloon { width: 20px; height: 30px; border-radius: 50%; position: fixed; animation: rise linear infinite; }
@keyframes rise { to { transform: translateY(-120vh); } }

/* Stars */
.star { width: 3px; height: 3px; background: yellow; border-radius: 50%; position: fixed; animation: explode 0.8s forwards; }
@keyframes explode { 0% { transform: translate(0,0) scale(1); opacity:1; } 100% { transform: translate(var(--x), var(--y)) scale(0); opacity:0; } }

/* Fireworks bottom text */
.firework-text { width: 5px; height: 5px; background: gold; position: absolute; border-radius: 50%; }
</style>
</head>
<body>

<div id="bgGift" class="bg active"></div>
<div id="bgChoco" class="bg"></div>
<div id="overlay"></div>

<div id="content">
  <p id="msg">Tap the gift üéÅ</p>
  <button id="giftButton" onclick="startMagic()">Open Gift üéÖ</button>
</div>

<audio id="music" loop>
  <source src="song.mp3" type="audio/mpeg">
</audio>

<script>
const herName = "FRAZER CHEROTICH";
const giftButton = document.getElementById("giftButton");
const music = document.getElementById("music");
const msg = document.getElementById("msg");
const bgGift = document.getElementById("bgGift");
const bgChoco = document.getElementById("bgChoco");

// Particle generators
function createSnow(count=40){
  for(let i=0;i<count;i++){
    let s = document.createElement("div");
    s.className="particle snow";
    s.style.left=Math.random()*100+"vw";
    s.style.fontSize=(10+Math.random()*15)+"px";
    s.style.animationDuration=(5+Math.random()*5)+"s";
    s.onclick=()=>s.remove();
    document.body.appendChild(s);
  }
}

function createRain(count=30){
  for(let i=0;i<count;i++){
    let r = document.createElement("div");
    r.className="particle rain";
    r.style.left=Math.random()*100+"vw";
    r.style.animationDuration=(1+Math.random())+"s";
    document.body.appendChild(r);
  }
}

function createHearts(count=15){
  for(let i=0;i<count;i++){
    let h = document.createElement("div");
    h.className="particle heart";
    h.style.left=Math.random()*100+"vw";
    h.style.animationDuration=(8+Math.random()*5)+"s";
    document.body.appendChild(h);
  }
}

function createBalloons(count=10){
  for(let i=0;i<count;i++){
    let b = document.createElement("div");
    b.className="particle balloon";
    b.style.left=Math.random()*100+"vw";
    b.style.backgroundColor=`hsl(${Math.random()*360},70%,60%)`;
    b.style.animationDuration=(6+Math.random()*4)+"s";
    document.body.appendChild(b);
  }
}

function createStars(count=20){
  for(let i=0;i<count;i++){
    let s = document.createElement("div");
    s.className="star";
    let angle=Math.random()*Math.PI*2;
    let radius=50+Math.random()*100;
    s.style.setProperty("--x",radius*Math.cos(angle)+"px");
    s.style.setProperty("--y",radius*Math.sin(angle)+"px");
    s.style.left=(50+Math.random()*10)+"%";
    s.style.top=(50+Math.random()*10)+"%";
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),800);
  }
}

// Bottom fireworks forming text
function fireworksText(message){
  const startX=50, startY=90;
  const spacing=15;
  for(let i=0;i<message.length;i++){
    let c=message[i];
    if(c===" ") continue;
    let charOffset=i*spacing;
    for(let j=0;j<5;j++){ // sparks per letter
      let f=document.createElement("div");
      f.className="firework-text";
      f.style.left=startX+charOffset+Math.random()*5+"vw";
      f.style.top=startY-Math.random()*10+"vh";
      document.body.appendChild(f);
      setTimeout(()=>f.remove(),3000);
    }
  }
}

function startMagic(){
  music.currentTime=0;
  music.volume=0.8;
  music.play().catch(()=>{document.addEventListener("touchstart",()=>music.play(),{once:true});});
  giftButton.disabled=true;
  bgGift.classList.remove("active");
  bgChoco.classList.add("active");

  createSnow(); createRain(); createHearts(); createBalloons();

  msg.innerText="";

  setTimeout(()=>{ msg.innerText=`A heartfelt Christmas gift from your deskie,\nPrince de Lee üéÅ`; },1800);
  setTimeout(()=>{ msg.innerText+=`\n\nMerry Christmas ${herName} üéÑ`; },3500);
  setTimeout(()=>{ msg.innerText+=`\nI hope today treats you kindly and makes you smile.`; },5200);
  setTimeout(()=>{ msg.innerText+=`\nI could‚Äôve sent a text‚Ä¶`; },6800);
  setTimeout(()=>{ msg.innerText+=`\nbut I chose to be extra üòå`; },8300);
  setTimeout(()=>{
    msg.innerText+=`\n\nThis message was coded especially for you üíõ`;
    giftButton.disabled=false;
    giftButton.innerText="Play Again üé∂";
    giftButton.classList.add("pulse");
    fireworksText("Merry X-mass Frazer");
    createStars();
  },10000);
}

createSnow();
</script>
</body>
</html>
